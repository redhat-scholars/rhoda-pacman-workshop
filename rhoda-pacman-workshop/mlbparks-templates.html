<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MLBParks App :: Deploy Pacman using Red Hat OpenShift Database Access</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/rhoda-pacman-workshop/mlbparks-templates.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/course-template">Deploy Pacman using Red Hat OpenShift Database Access</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhoda-pacman-workshop" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-workshop-summary.html">Workshop Summary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-environment.html">OpenShift Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html">Explore OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-explore.html#the_web_console">The Web Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html#command_line_interface">Command Line Interface</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="common-explore.html#download_openshift_cli">Download OpenShift CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="common-explore.html#use_web_terminal">Web Terminal</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html#connect_to_the_cluster_with_cli">Connect to the OpenShift Cluster from CLI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="common-explore.html#working_with_proxies">Working with proxies</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="prerequisites.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="projects.html">Projects</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="projects.html#create_your_first_project">Create your First Project</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-pacman-architecture.html">Pacman Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-java.html">Pacman App</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java.html#source_to_image">Background: Source-to-Image (S2I)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-java.html#creating_java_application">Exercise: Creating a Pacman application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pacman-java.html#add_to_project">Add to Project</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pacman-java.html#using_application_code_on_git_server">Using Application Code on a Git Server</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pacman-java.html#build_code_on_openshift">Build the Code on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-java-databases.html">Connecting to a Database</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#storage">Background: Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#challenges_dbaas">Background: DBaaS &amp; Present Challenges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#sol_rh_dbaas">Background: Red Hat Solution</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#bg_sb_lib">Background:Red Hat Solution</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#sol_rh_dbaas">Background: Service binding libraries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#deploy_mongodb">Exercise: Deploy MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#access_mongodb">Exercise : Accessing the database access menu for configuring and monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#find_mongodb_creds">Exercise: Find your MongoDB Atlas account credentials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#access_dbaas_console">Exercise: Accessing the developer workspace and adding a database instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-databases.html#explore_rhoda_magic">Exercise: Navigate through Data Services Console</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-application-health.html">Application Healthchecks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-application-health.html#add_health_checks">Exercise: Add Health Checks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-java-codechanges-github.html">Webhooks with OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github.html#prerequisite_github_account">Prerequisite: GitHub Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github.html#webhooks">Webhooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github.html#webhooks_with_openshift">Webhooks with OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github.html#configuring_github_webhooks">Exercise: Configuring GitHub Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github.html#using_github_webhooks">Exercise: Using GitHub Web Hooks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-java-codechanges-github-actions.html">GitHub Actions with OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github-actions.html#disable_github_webhook">Disable GitHub Webhook</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github-actions.html#disable_openshift_triggers">Disable OpenShift Triggers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github-actions.html#configure_github_action">Configure GitHub Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github-actions.html#add_github_action">Add GitHub Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-codechanges-github-actions.html#enable_openshift_triggers">Enable OpenShift Triggers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-java-pipeline.html">Continuous Integration and Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline.html#install_openshift_pipelines_from_operatorhub">Install OpenShift Pipelines from OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline.html#understanding_tekton">Understanding Tekton</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline.html#create_your_pipeline">Create Your Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline.html#run_the_pipeline">Run the Pipeline</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-java-pipeline-codechanges-github.html">Webhooks with Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline-codechanges-github.html#prerequisite_github_account">Prerequisite: GitHub Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline-codechanges-github.html#webhooks">Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline-codechanges-github.html#adding_triggers_to_your_pipeline">Adding Triggers to your Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline-codechanges-github.html#configuring_github_webhooks">Exercise: Configuring GitHub Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-java-pipeline-codechanges-github.html#using_github_webhooks">Exercise: Using GitHub Web Hooks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-further-resources.html">Further Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-workshop-links.html">Workshop Links</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#openshift_cluster_url">OpenShift Cluster URL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#workshop_guides">Workshop Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#web_terminal">Web terminal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#git_server">Git Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Deploy Pacman using Red Hat OpenShift Database Access</a></li>
    <li><a href="mlbparks-templates.html">MLBParks App</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/rhoda-pacman-workshop/edit/master/documentation/modules/ROOT/pages/mlbparks-templates.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">MLBParks App</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this lab, we&#8217;re going to deploy a complete backend application, consisting of
a REST API backend and a MongoDB database. The complete application will already
be wired together and described as a backend for the map visualization tool, so
that once the application is built and deployed, you will be able to see the new
map.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/roadshow-app-architecture-mlbparks.png" alt="Application architecture" width="800">
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s combine all of the exercises we have performed in the last several labs by
using a <strong>Template</strong> that we can instantiate with a single command.  While we
could have used templates to deploy everything in the workshop today, remember
that it is important for you to understand how to create, deploy, and wire
resources together.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="instantiate_template"><a class="anchor" href="#instantiate_template"></a>Exercise: Instantiate a Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The front end application we&#8217;ve been working with this whole time will display
as many back end services' data as are created. Adding more stuff with the right
<strong>Label</strong> will make more stuff show up on the map.</p>
</div>
<div class="paragraph">
<p>Now you will deploy a map of Major League Baseball stadiums in the US by using a
template. It is pre-configured to build the back end Java application, and
deploy the MongoDB database. It also uses a <strong>Hook</strong> to call the <code>/ws/data/load</code>
endpoint to cause the data to be loaded into the database from a JSON file in
the source code repository. Execute the following command:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc create -f https://raw.githubusercontent.com/openshift-roadshow/mlbparks/master/ose3/application-template-eap.json -n %PROJECT%</code></pre>
</div>
</div>
<div class="paragraph">
<p>What just happened? What did you just <code>create</code>? The item that we passed to the <code>create</code>
command is a <strong>Template</strong>. <code>create</code> simply makes the template available in
your <strong>Project</strong>. You can see this with the following command:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get template</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see output like the following:</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mlbparks      Application template MLBParks backend running on Wildfly and using mongodb   12 (2 blank)   8</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the following command to instantiate the template:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-app mlbparks -p APPLICATION_NAME=mlbparks</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see some output similar to this:</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">--&gt; Deploying template "workshop/mlbparks" to project workshop

     MLBparks
     ---------
     Application template MLBParks backend running on Wildfly and using mongodb

     * With parameters:
        * Application Name=mlbparks
        * Application route=
        * Mongodb App=mongodb-mlbparks
        * Git source repository=https://github.com/openshift-roadshow/mlbparks.git
        * Git branch/tag reference=master
        * Maven mirror url=
        * Database name=mongodb
        * Database user name=userW3n # generated
        * Database user password=4PmSfXWL # generated
        * Database admin password=cBQ4RGJf # generated
        * GitHub Trigger=TOR1p3wO # generated
        * Generic Trigger=NUlqyK54 # generated

--&gt; Creating resources ...
    configmap "mlbparks" created
    service "mongodb-mlbparks" created
    deploymentconfig.apps.openshift.io "mongodb-mlbparks" created
    imagestream.image.openshift.io "mlbparks" created
    buildconfig.build.openshift.io "mlbparks" created
    deploymentconfig.apps.openshift.io "mlbparks" created
    service "mlbparks" created
    route.route.openshift.io "mlbparks" created
--&gt; Success
    Build scheduled, use 'oc logs -f bc/mlbparks' to track its progress.
    Access your application via route 'mlbparks-workshop.apps.cluster-1d43.1d43.openshiftworkshop.com'
    Run 'oc status' to view your app.</code></pre>
</div>
</div>
<div class="paragraph">
<p>OpenShift will now:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure and start a build</p>
<div class="ulist">
<ul>
<li>
<p>Using the supplied Maven mirror URL (if you have specified the parameter)</p>
</li>
<li>
<p>From the supplied source code repository</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configure and deploy MongoDB</p>
<div class="ulist">
<ul>
<li>
<p>Using auto-generated user, password, and database name</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configure environment variables for the app to connect to the DB</p>
</li>
<li>
<p>Create the correct services</p>
</li>
<li>
<p>Label the app service with <code>type=parksmap-backend</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All with one command!</p>
</div>
<div class="paragraph">
<p>When the build is complete, visit the parks map. Does it work? Think about how
this could be used in your environment.  For example, a template could define a
large set of resources that make up a "reference application", complete with
several app servers, databases, and more.  You could deploy the entire set of
resources with one command, and then hack on them to develop new features,
microservices, fix bugs, and more.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You&#8217;ll notice apps are already inside <code>workshop</code> application group and they have a nice EAP and MongoDB icon. This is thanks to the label <code>app.kubernetes.io/part-of</code> and <code>app.kubernetes.io/name</code> that the template already setup for both DeploymentConfigs
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mlbparks-templates-complete-overview.png" alt="Complete overview">
</div>
</div>
<div class="paragraph">
<p>In addition to being able to instantiate templates from the command line as we did above, templates can also be instantiated from the Developer Perspective in the web console. Click <strong>+Add</strong>, then <strong>From Catalog</strong> and search for <code>mlb</code>. You should see a result for <code>MLBparks</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mlbparks-templates-dev-catalog.png" alt="Template in Developer Catalog">
</div>
</div>
<div class="paragraph">
<p>If you click on <code>MLBparks</code> and then click the <strong>Instantiate Template</strong> button, you&#8217;ll see a form that guides you through the different required and optional parameters needed to instantiate this template.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Do not actually instantiate the template from the web console now, since you have already done so via the command line.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As a final exercise, look at the template that was used to create the
resources for our <strong>mlbparks</strong> application.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get template mlbparks -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>But as always, you can use the OpenShift web console to do the same. In the Developer Perspective, click <strong>Advanced &#8594; Search</strong> in the left navigation, then select <strong>Template</strong> from the dropdown, and click <strong>mlbparks</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mlbparks-templates-yaml-menu.png" alt="Complete overview">
</div>
</div>
<div class="paragraph">
<p>On the next page, click <strong>YAML</strong> to see/edit the YAML from here.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/mlbparks-templates-yaml-edit.png" alt="Template YAML edit">
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
