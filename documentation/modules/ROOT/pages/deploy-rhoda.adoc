= Installing Red Hat OpenShift Database Access
:navtitle: Deploy RHODA 

[#deploy_rhoda]
== Deploy RHODA

Normally operators can be deployed from Operator Hub by selecting the Operator from Operator Hub and we can also use Ansible to deploy Operators depending on deployment techniques that are already adopted by the teams.

*Using CLI*
Install Web Terminal Operator and  and launch terminal from OpenShift Console
To install Web Terminal, please follow the following instructions : https://docs.openshift.com/container-platform/4.10/web_console/odc-about-web-terminal.html


Create the RHODA catalog source by running the following commands.

Note: The catalog source image repo can be the users local repo or developers space or SRE/OSD release image repo. For Service Preview release we will use RHODA SRE/OSD addon release image repo.

image::rhoda1.png[Application architecture,800,align="center"]


Verify that the catalog source is added with the following command

----
oc get catalogsource dbaas-operator -n openshift-marketplace
----


Verify that dbaas-operator catalog source is in READY state, It might take a few minutes before the catalog source is ready. If the below command does not return READY, wait a few minutes and try to verify the status again. You can also check this by going into openshift-marketplace namespace dbass-operator catalog pod

----
oc get catalogsource -n openshift-marketplace  dbaas-operator -o jsonpath='{.status.connectionState.lastObservedState} {"\n"}'
----
Verify if required any other details with below command (optional)
----
oc describe packagemanifests dbaas-operator -n openshift-marketplace
----
Verify if required any other details with below command (optional)
----
oc describe packagemanifests dbaas-operator -n openshift-marketplace
----

Go to Operator Hub and look for OpenShift Database Access Operator

image::rhoda5.png[Application architecture,800,align="center"]

Once Selected the OpenShift Database Access Operator,

Navigate in the web console to the Operators → OperatorHub page.
Type a keyword into the Filter by keyword box OpenShift Database Access Operator.
Select the OpenShift Database Access Operator  to display additional information.

image::rhoda6.png[Application architecture,800,align="center"]

On the Install Operator page. The RHODA operator is cluster scope and the default installed namespace is openshift-dbaas-operator and use the same default settings.

image::rhoda7.png[Application architecture,800,align="center"]

On successful installation of RHODA operator, will automatically install all its dependencies including provider operators, console plugins as seen in the screenshot and you see an additional menu with name Data Services in the end of menu list. Once all it’s components installation completed the dbaas operator pod logs will shows: DBaaS platform stack installation complete.

image::rhoda8.png[Application architecture,800,align="center"]

image::rhoda9.png[Application architecture,800,align="center"]


Verify the installation completion logs

image::rhoda11.png[Application architecture,800,align="center"]

  Repeat Steps above from 1 -7 in the ARO and ROSA Clusters as well to ensure we have RHODA installed on all of the three clusters

 Create a Provider Account depending on the the managed database that the application needs to connect to

 To create a Provide Account, please refer to the documentation : 


In the Developer Perspective, click add and select connect database from the list of available options on each cluster.

image::rhoda22.png[Application architecture,800,align="center"]

Once above step is performed, you would be able to see as shown below in developer perspective

image::rhoda33.png[Application architecture,800,align="center"]

Finally, to connect application to the database, we need to create a service binding by doing a drag and drop from the application to the connected database which will prompt a message as shown below

image::rhoda44.png[Application architecture,800,align="center"]

After successfully creating the service binding application will be connected to the database

image::rhoda55.png[Application architecture,800,align="center"]
