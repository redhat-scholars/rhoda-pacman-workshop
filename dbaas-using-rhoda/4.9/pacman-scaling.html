<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scaling Apps :: Connecting Applications to Managed Databases</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/dbaas-using-rhoda/4.9/pacman-scaling.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="https://redhat-scholars.github.io/course-template">Connecting Applications to Managed Databases</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="dbaas-using-rhoda" data-version="4.9">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">Connecting Applications to Managed Databases</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-workshop-summary.html">Workshop</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-environment.html">OpenShift Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html">Explore OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-explore.html#the_web_console">The Web Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html#command_line_interface">Command Line Interface</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="common-explore.html#download_openshift_cli">Download OpenShift CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="common-explore.html#use_web_terminal">Web Terminal</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html#connect_to_the_cluster_with_cli">Connect to the OpenShift Cluster from CLI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="common-explore.html#working_with_proxies">Working with proxies</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="prerequisites.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-nodejs-bg.html">Before we begin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-bg.html#challenges_dbaas">DBaaS &amp; Present Challenges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-bg.html#sol_rh_dbaas">Red Hat Solution</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-bg.html#bg_sb_lib">Service binding libraries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="deploy-rhoda.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deploy-rhoda.html#deploy_web_terminal">OpenShift Web Terminal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deploy-rhoda.html#deploy_kustomize">Kustomize</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deploy-rhoda.html#deploy_ansible">Ansible</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deploy-rhoda.html#deploy_rhacm">RHACM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deploy-rhoda.html#deploy_ocp_pipelines">OpenShift Pipelines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="explore-rhoda.html">Explore RHODA</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="explore-rhoda.html#explore_cli">OpenShift CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="explore-rhoda.html#explore_web_console">OpenShift Web console</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="projects.html">Projects</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="projects.html#create_pacman_project">Create Pacman Project</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-pacman-architecture.html">Pacman Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-nodejs.html">Pacman App</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs.html#source_to_image">Background: Source-to-Image (S2I)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-nodejs.html#creating_nodejs_application">Exercise: Creating a Pacman application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pacman-nodejs.html#add_to_project">Add to Project</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pacman-nodejs.html#using_application_code_on_git_server">Using Application Code on a Git Server</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pacman-nodejs.html#build_code_on_openshift">Build the Code on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-nodejs-databases.html">Connecting Pacman to MongoDB Atlas Cloud Database Instance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-databases.html#prereq_rhoda">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-databases.html#access_mongodb">Exercise: Accessing the database access menu for configuring and monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-databases.html#find_mongodb_creds">Exercise: Find your MongoDB Atlas account credentials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-databases.html#dev_add_db">Exercise: Accessing the developer workspace and adding a database instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-databases.html#play_pacman">Exercise: Play Pacman and save your high scores</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-application-health.html">Application Healthchecks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-application-health.html#add_health_checks">Exercise: Add Health Checks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-nodejs-codechanges-github.html">Webhooks with OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github.html#prerequisite_github_account">Prerequisite: GitHub Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github.html#webhooks">Webhooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github.html#webhooks_with_openshift">Webhooks with OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github.html#configuring_github_webhooks">Exercise: Configuring GitHub Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github.html#using_github_webhooks">Exercise: Using GitHub Web Hooks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-nodejs-codechanges-github-actions.html">GitHub Actions with OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github-actions.html#disable_github_webhook">Disable GitHub Webhook</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github-actions.html#disable_openshift_triggers">Disable OpenShift Triggers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github-actions.html#configure_github_action">Configure GitHub Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github-actions.html#add_github_action">Add GitHub Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-codechanges-github-actions.html#enable_openshift_triggers">Enable OpenShift Triggers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-nodejs-pipeline.html">Continuous Integration and Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline.html#install_openshift_pipelines_from_operatorhub">Install OpenShift Pipelines from OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline.html#understanding_tekton">Understanding Tekton</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline.html#create_your_pipeline">Create Your Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline.html#run_the_pipeline">Run the Pipeline</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="pacman-nodejs-pipeline-codechanges-github.html">Webhooks with Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline-codechanges-github.html#prerequisite_github_account">Prerequisite: GitHub Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline-codechanges-github.html#webhooks">Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline-codechanges-github.html#adding_triggers_to_your_pipeline">Adding Triggers to your Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline-codechanges-github.html#configuring_github_webhooks">Exercise: Configuring GitHub Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pacman-nodejs-pipeline-codechanges-github.html#using_github_webhooks">Exercise: Using GitHub Web Hooks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-further-resources.html">Further Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-workshop-links.html">Workshop Links</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#openshift_cluster_url">OpenShift Cluster URL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#workshop_guides">Workshop Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#web_terminal">Web terminal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#git_server">Git Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Connecting Applications to Managed Databases</span>
    <span class="version">4.9</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Connecting Applications to Managed Databases</span>
      <ul class="versions">
        <li class="version">
          <a href="../../rhoda-pacman-workshop/4.10.5/index.html">4.10.5</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Connecting Applications to Managed Databases</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">4.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Connecting Applications to Managed Databases</a></li>
    <li><a href="pacman-scaling.html">Scaling Apps</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/rhoda-pacman-workshop/edit/4.9/documentation/modules/ROOT/pages/pacman-scaling.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Scaling Apps</h1>
<div class="sect1">
<h2 id="deployments_and_replication_controllers"><a class="anchor" href="#deployments_and_replication_controllers"></a>Background: Deployments and ReplicaSets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While <strong>Services</strong> provide routing and load balancing for <strong>Pods</strong>, which may go in and
out of existence, <strong>ReplicaSet</strong> (RS) and <strong>ReplicationController</strong> (RC) are used to specify and then
ensure the desired number of <strong>Pods</strong> (replicas) are in existence. For example, if
you always want your application server to be scaled to 3 <strong>Pods</strong> (instances), a
<strong>ReplicaSet</strong> is needed. Without an RS, any <strong>Pods</strong> that are killed or
somehow die/exit are not automatically restarted. <strong>ReplicaSets</strong> and <strong>ReplicationController</strong> are how OpenShift "self heals" and while <strong>Deployments</strong> control <strong>ReplicaSets</strong>, <strong>ReplicationController</strong> here are controlled by <strong>DeploymentConfigs</strong>.</p>
</div>
<div class="paragraph">
<p>From the <a href="https://docs.openshift.com/container-platform/4.10/applications/deployments/what-deployments-are.html">deployments documentation</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<em>
Similar to a replication controller, a ReplicaSet is a native Kubernetes API object that ensures a specified number of pod replicas are running at any given time. The difference between a replica set and a replication controller is that a replica set supports set-based selector requirements whereas a replication controller only supports equality-based selector requirements.
</em>
</blockquote>
</div>
<div class="paragraph">
<p>In Kubernetes, a <strong>Deployment</strong> (D) defines how something should be deployed. In almost all cases, you will end up using the <strong>Pod</strong>, <strong>Service</strong>,
<strong>ReplicaSet</strong> and <strong>Deployment</strong> resources together. And, in
almost all of those cases, OpenShift will create all of them for you.</p>
</div>
<div class="paragraph">
<p>There are some edge cases where you might want some <strong>Pods</strong> and an <strong>RS</strong> without a <strong>D</strong>
or a <strong>Service</strong>, and others, so feel free to ask us about them after the labs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exploring_deployment_related_objects"><a class="anchor" href="#exploring_deployment_related_objects"></a>Exercise: Exploring Deployment-related Objects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that we know the background of what a <strong>ReplicaSet</strong> and
<strong>Deployment</strong> are, we can explore how they work and are related. Take a
look at the <strong>Deployment</strong> (D) that was created for you when you told
OpenShift to stand up the <code>parksmap</code> image:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get deployment</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME       READY   UP-TO-DATE   AVAILABLE   AGE
parksmap   1/1     1            1           20m</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get more details, we can look into the <strong>ReplicaSet</strong> (<strong>RS</strong>).</p>
</div>
<div class="paragraph">
<p>Take a look at the <strong>ReplicaSet</strong> (RS) that was created for you when
you told OpenShift to stand up the <code>parksmap</code> image:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get rs</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                  DESIRED   CURRENT   READY   AGE
parksmap-65c4f8b676   1         1         1       21m</code></pre>
</div>
</div>
<div class="paragraph">
<p>This lets us know that, right now, we expect one <strong>Pod</strong> to be deployed
(<code>Desired</code>), and we have one <strong>Pod</strong> actually deployed (<code>Current</code>). By changing
the desired number, we can tell OpenShift that we want more or less <strong>Pods</strong>.</p>
</div>
<div class="paragraph">
<p>OpenShift&#8217;s <strong>HorizontalPodAutoscaler</strong> effectively monitors the CPU usage of a
set of instances and then manipulates the RCs accordingly.</p>
</div>
<div class="paragraph">
<p>You can learn more about the CPU-based
<a href="https://docs.openshift.com/container-platform/4.10/nodes/pods/nodes-pods-autoscaling.html#nodes-pods-autoscaling-about_nodes-pods-autoscaling">Horizontal Pod Autoscaler here</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scaling_the_application"><a class="anchor" href="#scaling_the_application"></a>Exercise: Scaling the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s scale our parksmap "application" up to 2 instances. We can do this with
the <code>scale</code> command. You could also do this by incrementing the Desired Count in the OpenShift web console. Pick one of these methods; it&#8217;s your choice.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc scale --replicas=2 deployment/parksmap</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also scale up to two pods in the <strong>Developer Perspective</strong>. From the Topology view, first click the <code>parksmap</code> deployment config and select the <strong>Details</strong> tab:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/parksmap-details.png" alt="Details">
</div>
</div>
<div class="paragraph">
<p>Next, click the <strong>^</strong> icon next to the Pod visualization to scale up to 2 pods.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/parksmap-scaleup.png" alt="Scaling Up">
</div>
</div>
<div class="paragraph">
<p>To verify that we changed the number of replicas, issue the following command:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get rs</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                  DESIRED   CURRENT   READY   AGE
parksmap-65c4f8b676   2         2         2       23m</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see that we now have 2 replicas. Let&#8217;s verify the number of pods with
the <code>oc get pods</code> command:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                        READY   STATUS    RESTARTS   AGE
parksmap-65c4f8b676-fxcrq   1/1     Running   0          92s
parksmap-65c4f8b676-k5gkk   1/1     Running   0          24m</code></pre>
</div>
</div>
<div class="paragraph">
<p>And lastly, let&#8217;s verify that the <strong>Service</strong> that we learned about in the
previous lab accurately reflects two endpoints:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc describe svc parksmap</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see something like the following output:</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">Name:              parksmap
Namespace:         user1
Labels:            app=workshop
                   app.kubernetes.io/component=parksmap
                   app.kubernetes.io/instance=parksmap
                   app.kubernetes.io/part-of=workshop
                   component=parksmap
                   role=frontend
Annotations:       openshift.io/generated-by: OpenShiftWebConsole
Selector:          app=parksmap,deploymentconfig=parksmap
Type:              ClusterIP
IP:                172.30.22.209
Port:              8080-tcp  8080/TCP
TargetPort:        8080/TCP
Endpoints:         10.128.2.90:8080,10.131.0.40:8080
Session Affinity:  None
Events:            &lt;none&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another way to look at a <strong>Service</strong>'s endpoints is with the following:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get endpoints parksmap</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you will see something like the following:</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME       ENDPOINTS                           AGE
parksmap   10.128.2.90:8080,10.131.0.40:8080   45m</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your IP addresses will likely be different, as each pod receives a unique IP
within the OpenShift environment. The endpoint list is a quick way to see how
many pods are behind a service.</p>
</div>
<div class="paragraph">
<p>You can also see that both <strong>Pods</strong> are running in the Developer Perspective:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/parksmap-scaled.png" alt="Scaled">
</div>
</div>
<div class="paragraph">
<p>Overall, that&#8217;s how simple it is to scale an application (<strong>Pods</strong> in a
<strong>Service</strong>). Application scaling can happen extremely quickly because OpenShift
is just launching new instances of an existing image, especially if that image
is already cached on the node.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="application_self_healing"><a class="anchor" href="#application_self_healing"></a>Application "Self Healing"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Because OpenShift&#8217;s <strong>RSs</strong> are constantly monitoring to see that the desired number
of <strong>Pods</strong> actually are running, you might also expect that OpenShift will "fix" the
situation if it is ever not right. You would be correct!</p>
</div>
<div class="paragraph">
<p>Since we have two <strong>Pods</strong> running right now, let&#8217;s see what happens if we
"accidentally" kill one. Run the <code>oc get pods</code> command again, and choose a <strong>Pod</strong>
name. Then, do the following:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc delete pod parksmap-65c4f8b676-k5gkk &amp;&amp; oc get pods</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pod "parksmap-65c4f8b676-k5gkk" deleted
NAME                        READY   STATUS    RESTARTS   AGE
parksmap-65c4f8b676-bjz5g   1/1     Running   0          13s
parksmap-65c4f8b676-fxcrq   1/1     Running   0          4m48s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Did you notice anything? One container has been deleted, and there&#8217;s a new container already being created.</p>
</div>
<div class="paragraph">
<p>Also, the names of the <strong>Pods</strong> are slightly changed.
That&#8217;s because OpenShift almost immediately detected that the current state (1
<strong>Pod</strong>) didn&#8217;t match the desired state (2 <strong>Pods</strong>), and it fixed it by scheduling
another <strong>Pod</strong>.</p>
</div>
<div class="paragraph">
<p>Additionally, OpenShift provides rudimentary capabilities around checking the
liveness and/or readiness of application instances. If the basic checks are
insufficient, OpenShift also allows you to run a command inside the container in
order to perform the check. That command could be a complicated script that uses
any installed language.</p>
</div>
<div class="paragraph">
<p>Based on these health checks, if OpenShift decided that our <code>parksmap</code>
application instance wasn&#8217;t alive, it would kill the instance and then restart
it, always ensuring that the desired number of replicas was in place.</p>
</div>
<div class="paragraph">
<p>More information on probing applications is available in the
<a href="https://docs.openshift.com/container-platform/4.10/applications/application-health.html">Application
Health</a> section of the documentation and later in this guide.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scale_down"><a class="anchor" href="#scale_down"></a>Exercise: Scale Down</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we continue, go ahead and scale your application down to a single
instance. Feel free to do this using whatever method you like.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Don&#8217;t forget to scale down back to 1 instance your <code>parksmap</code> component as otherwise you might experience some weird behavior in later labs. This is due to how the application has been coded and not to OpenShift itself.
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
